(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+u8T":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var l,i=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="film-card">\r\n    <div class="img-wrapper">\r\n        <img src="https://image.tmdb.org/t/p/w500'+s(typeof(l=null!=(l=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?l:o)===c?l.call(i,{name:"poster_path",hash:{},data:r,loc:{start:{line:4,column:49},end:{line:4,column:64}}}):l)+'" alt="'+s(typeof(l=null!=(l=u(n,"title")||(null!=t?u(t,"title"):t))?l:o)===c?l.call(i,{name:"title",hash:{},data:r,loc:{start:{line:4,column:71},end:{line:4,column:80}}}):l)+'" data-id='+s(typeof(l=null!=(l=u(n,"id")||(null!=t?u(t,"id"):t))?l:o)===c?l.call(i,{name:"id",hash:{},data:r,loc:{start:{line:4,column:90},end:{line:4,column:96}}}):l)+' class="film-img">\r\n    </div>\r\n    <div class="film-box">\r\n        <h3 class="film-title">'+s(typeof(l=null!=(l=u(n,"original_title")||(null!=t?u(t,"original_title"):t))?l:o)===c?l.call(i,{name:"original_title",hash:{},data:r,loc:{start:{line:7,column:31},end:{line:7,column:49}}}):l)+'</h3>\r\n        <ul class="genres__list">\r\n            <li class="genres__item">\r\n                <span class="film-text genre">'+s(typeof(l=null!=(l=u(n,"genre_names")||(null!=t?u(t,"genre_names"):t))?l:o)===c?l.call(i,{name:"genre_names",hash:{},data:r,loc:{start:{line:10,column:46},end:{line:10,column:61}}}):l)+' |</span>\r\n                <span class="film-text">'+s(typeof(l=null!=(l=u(n,"date")||(null!=t?u(t,"date"):t))?l:o)===c?l.call(i,{name:"date",hash:{},data:r,loc:{start:{line:11,column:40},end:{line:11,column:48}}}):l)+'</span>\r\n                <span class="film-rate">'+s(typeof(l=null!=(l=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?l:o)===c?l.call(i,{name:"vote_average",hash:{},data:r,loc:{start:{line:12,column:40},end:{line:12,column:56}}}):l)+"</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:17,column:9}}}))?l:""},useData:!0})},"0HMw":function(e,t,n){},JzNs:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var l,i=e.lambda,o=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="close-modal" data-close></span>\r\n<div class="modal__block-img"><img class="modal__img" src="https://image.tmdb.org/t/p/w500'+o(i(null!=t?c(t,"poster_path"):t,t))+'"\r\n        alt="'+o(i(null!=t?c(t,"original_title"):t,t))+'">\r\n</div>\r\n<div class="description">\r\n    <h1 class="modal__title">'+o(i(null!=t?c(t,"original_title"):t,t))+'</h1>\r\n    <ul class="modal__keys">\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Vote / Votes</p>\r\n            <p class="modal__value"><span class="rating">'+o(i(null!=t?c(t,"vote_average"):t,t))+" </span> / "+o(i(null!=t?c(t,"vote_count"):t,t))+'</p>\r\n        </li>\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Popularity</p>\r\n            <p class="modal__value">'+o(i(null!=t?c(t,"popularity"):t,t))+'</p>\r\n        </li>\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Original Title</p>\r\n            <p class="modal__value">'+o(i(null!=t?c(t,"original_title"):t,t))+'</p>\r\n        </li>\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Genre</p>\r\n            <ul class="modal__value genre">\r\n                '+(null!=(l=c(n,"each").call(null!=t?t:e.nullContext||{},null!=t?c(t,"genres"):t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:24,column:16},end:{line:24,column:82}}}))?l:"")+'\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n    <h2 class="modal__about">ABOUT</h2>\r\n    <p class="modal__text">'+o(i(null!=t?c(t,"overview"):t,t))+'</p>\r\n    <div class="modal__button">\r\n        <button class="button is-hidden" type="button" data-id="'+o(i(null!=t?c(t,"id"):t,t))+'" data-action="add-watched"\r\n            data-check="false">add to\r\n            Watched</button>\r\n        <button class="button is-hidden" type="button" data-id="'+o(i(null!=t?c(t,"id"):t,t))+'" data-action="add-queue"\r\n            data-check="false">add to\r\n            queue</button>\r\n    </div>\r\n</div>\r\n'},2:function(e,t,n,a,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="item-genre">'+e.escapeExpression(e.lambda(null!=t?l(t,"name"):t,t))+"</li>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:39,column:9}}}))?l:""},useData:!0})},QfWi:function(e,t,n){"use strict";n.r(t);n("0HMw"),n("JBxO"),n("FdtR"),n("wcNg");var a=n("czhI"),r=n.n(a);function l(e,t,n,a,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}var i={searchQuery:"",apiKey:"e1648943ec3f00b3b8db827b73df4be9",page:1,maxPage:"number",fetchID:function(e){return r()("https://api.themoviedb.org/3/movie/"+e+"?api_key="+this.apiKey).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},fetchGenres:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r()("https://api.themoviedb.org/3/genre/movie/list?api_key="+t.apiKey).then((function(e){return e.data})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,c,"next",e)}function c(e){l(i,a,r,o,c,"throw",e)}o(void 0)}))})()},fetchMovies:function(){return r()("https://api.themoviedb.org/3/search/movie?query="+this.query+"&api_key="+this.apiKey+"&page="+this.page).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},fetchPopularMovies:function(){return r()("https://api.themoviedb.org/3/trending/movie/day?api_key="+this.apiKey+"&page="+this.page).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},resetPage:function(){this.page=1},setMaxPage:function(e){this.maxPage=e},get query(){return this.searchQuery},set query(e){this.searchQuery=e}},o={homepageSection:document.querySelector(".js-homepage"),librerySection:document.querySelector(".js-librery"),overlay:document.querySelector(".overlay"),modal:document.querySelector(".modal__card"),galleryRef:document.querySelector(".js-gallery__home"),galleryLibrery:document.querySelector(".js-gallery__librery"),inputSearch:document.querySelector("#searchQuery"),homeButton:document.querySelector('[data-action="home"]'),libraryButton:document.querySelector('[data-action="library"]'),homeButtonText:document.querySelector(".menu__home"),libraryButtonText:document.querySelector(".menu__library"),libraryButtons:document.querySelector(".library__buttons"),searchForm:document.querySelector(".input__field"),btnWatched:document.querySelector('[data-action="watched"]'),btnQueue:document.querySelector('[data-action="queue"]'),toPrevPageBtn:document.querySelector(".js-pagination .pagination__arrow-left"),toNextPageBtn:document.querySelector(".js-pagination .pagination__arrow-right"),toPrevPageBtnLibrery:document.querySelector(".library-pagination__arrow-left"),toNextPageBtnLibrery:document.querySelector(".library-pagination__arrow-right"),paginationList:document.querySelector(".js-pagination .pagination__list"),homePagination:document.querySelector(".js-pagination"),libraryPaginationList:document.querySelector(".library-pagination__list"),libraryPagination:document.querySelector(".library-pagination"),headerBack:document.querySelector(".page__header")},c=n("JzNs"),s=n.n(c),u=o.modal,d=function(e){var t=s()(e);u.insertAdjacentHTML("beforeend",t)},p=(n("RtS0"),n("Xlt+"),n("3dw1"),n("8cZI"),n("lmye"),n("WB5j"),n("D/wG"),[]),m=[];var f=n("bxPv"),h=n.n(f),g=o.galleryRef;var y=function(e){var t=h()(e);g.insertAdjacentHTML("beforeend",t)},v=(n("IvQZ"),n("uQK7"),n("4NM0"),n("jffb")),_=n.n(v),b=(n("bzha"),n("zrP5"),n("QJ3N"));function L(e,t){b.info({title:e,text:t})}function k(e,t,n,a,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function i(e){k(l,a,r,i,o,"next",e)}function o(e){k(l,a,r,i,o,"throw",e)}i(void 0)}))}}function P(){return S.apply(this,arguments)}function S(){return(S=x(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetchPopularMovies().then((function(e){return e.results}));case 2:return t=e.sent,e.next=5,i.fetchGenres().then((function(e){return e.genres}));case 5:return n=e.sent,e.abrupt("return",{newArrayFilm:t,arrayGenres:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){P().then((function(e){var t=e.newArrayFilm,n=e.arrayGenres;t.forEach((function(e){var t=e.genre_ids,a=e.release_date;n.forEach((function(n){var r=n.name,l=n.id;t.includes(l)&&(t.length>2&&t.splice(2,t.length-1,"Other"),t.splice(t.indexOf(l),1,r));var i=a.slice(0,4);e.date=i,e.genre_names=t.join(", ")}))})),y(t)}))}function q(){M(),T(),i.fetchPopularMovies().then((function(e){var t=e.page,n=e.total_pages;w(),O(t,n),B()}))}function E(){M(),T(),i.fetchMovies().then((function(e){var t=e.results,n=e.page,a=e.total_pages;0===t.length&&L("Try another word","No movies found for this request"),i.fetchMovies().then((function(e){var t=e.results;P().then((function(e){var n=e.arrayGenres;t.forEach((function(e){var t=e.genre_ids,a=e.release_date;n.forEach((function(n){var r=n.name,l=n.id;t.includes(l)&&(t.length>2&&t.splice(2,t.length-1,"Other"),t.splice(t.indexOf(l),1,r));var i=a.slice(0,4);e.date=i,e.genre_names=t.join(", ")}))})),y(t)}))})),O(n,a),B()}))}function j(){""===o.inputSearch.value?q():E()}function M(){o.galleryRef.innerHTML=""}function T(){o.paginationList.innerHTML=""}function O(e,t){if(i.page=e,i.setMaxPage(t),t<=1)o.homePagination.classList.add("is-hidden");else{o.homePagination.classList.remove("is-hidden");var n="",a=[],r='<li class="pagination__item"><button type="button" data-action="showPrevPages">...</button></li>',l='<li class="pagination__item"><button type="button" data-action="showNextPages">...</button></li>';if(t-e<6)for(var c=t;c>t-6&&c>0;c-=1){var s='<li class="pagination__item"><button type="button">'+c+"</button></li>";a.unshift(s)}else for(var u=e;u<e+6&&u<t;u+=1){var d='<li class="pagination__item"><button type="button">'+u+"</button></li>";a.push(d)}n=a.join(" "),t>6&&(n=a.join(" ")+l+'<li class="pagination__item"><button type="button">'+t+"</button></li>"),e>5&&(n='<li class="pagination__item"><button type="button">1</button></li>'+r+a.join(" ")+l+'<li class="pagination__item"><button type="button">'+t+"</button></li>"),t>6&&e>t-6&&(n='<li class="pagination__item"><button type="button">1</button></li>'+r+a.join(" ")),o.paginationList.insertAdjacentHTML("beforeend",n)}}function B(){o.paginationList.children.forEach((function(e){+e.textContent===i.page&&e.classList.add("current")}))}setTimeout(q,0),o.inputSearch.addEventListener("input",_()((function(e){var t=e.target.value;if(i.query=t,""===i.query)return i.resetPage(),M(),void q();i.resetPage(),E()}),500)),o.toNextPageBtn.addEventListener("click",(function(){if(i.page===i.maxPage)return void L("There are no more movies by this request!");i.page+=1,j()})),o.toPrevPageBtn.addEventListener("click",(function(){if(1===i.page)return;i.page-=1,j()})),o.paginationList.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if("showNextPages"===e.target.dataset.action)return i.page+=6,void j();if("showPrevPages"===e.target.dataset.action)return console.log(),i.page-=5,void j();var t=e.target;i.page=t.innerHTML,j()}));var I=o.homepageSection,N=o.librerySection,H=o.galleryRef,Q=o.inputSearch,C=o.btnWatched,F=o.btnQueue;function J(e,t,n){e.preventDefault(),Q.textContent="",H.innerHTML="",t.classList.add("is-hidden"),n.classList.remove("is-hidden")}function R(e,t){e.style.backgroundColor="#ff6b08",e.style.borderColor="transparent",t.style.backgroundColor="transparent",t.style.borderColor="#ffffff"}var W=n("+u8T"),z=n.n(W),D=o.galleryLibrery;var G=function(e){var t=z()(e);D.insertAdjacentHTML("beforeend",t)},A=o.galleryLibrery,K=o.libraryPagination,U=o.btnWatched,V=o.btnQueue,Z=o.toPrevPageBtnLibrery,X=o.toNextPageBtnLibrery,Y=1;function $(){R(U,V),A.innerHTML="",p.length>0?p.length>19?(K.classList.remove("is-hidden"),re(Y=1,p).forEach((function(e){return te(e)})),X.addEventListener("click",ne),Z.addEventListener("click",ae)):(K.classList.add("is-hidden"),p.forEach((function(e){return te(e)}))):(K.classList.add("is-hidden"),A.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Вы ничего не добавили</p></li>')}function ee(){R(V,U),A.innerHTML="",m.length>0?m.length>19?(K.classList.remove("is-hidden"),re(Y,m).forEach((function(e){return te(e)}))):(K.classList.add("is-hidden"),m.forEach((function(e){return te(e)}))):(K.classList.add("is-hidden"),A.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Вы ничего не добавили</p></li>')}function te(e){i.fetchID(e).then((function(e){var t=[e];t.forEach((function(e){var n=e.genres,a=e.release_date.slice(0,4),r=n.map((function(e){return e.name}));r.length>2&&r.splice(2,r.length-1,"Other"),e.date=a,e.genre_names=r.join(", "),console.log(t),G(t)}))}))}function ne(){A.innerHTML="",re(Y+=1,p).forEach((function(e){return te(e)})),re(Y,p).length<1&&(A.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Вернитесь назад</p></li>')}function ae(){A.innerHTML="",re(Y-=1,p).forEach((function(e){return te(e)})),re(Y,p).length<1&&(A.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Ткните вперед</p></li>')}function re(e,t){if(e<1)return[];var n=20*(e-1),a=n+20;return t.slice(n,a)}function le(e){e.style.backgroundColor="#ff6b08",e.style.color="#ffffff",e.style.border="none"}function ie(e){e.style.backgroundColor="#ffffff",e.style.color="#000000",e.style.border="1px solid black"}function oe(){var e=document.querySelector('[data-action="add-watched"]'),t=document.querySelector('[data-action="add-queue"]');e.addEventListener("click",ce),t.addEventListener("click",se),function(e,t){p.forEach((function(t){t===e.dataset.id&&(le(e),e.dataset.check="true")})),m.forEach((function(e){e===t.dataset.id&&(le(t),t.dataset.check="true")}))}(e,t)}function ce(e){var t=e.target.dataset.id;"true"!==e.target.dataset.check?(le(e.target),e.target.dataset.check="true",p.push(t),localStorage.setItem("addWatchedFilm",JSON.stringify(p))):(ie(e.target),e.target.dataset.check="false",p.forEach((function(e,n){e===t&&p.splice(n,1)})),$(),me(),localStorage.setItem("addWatchedFilm",JSON.stringify(p)))}function se(e){var t=e.target.dataset.id;"true"!==e.target.dataset.check?(le(e.target),e.target.dataset.check="true",m.push(t),localStorage.setItem("addQueueFilm",JSON.stringify(m))):(ie(e.target),e.target.dataset.check="false",m.forEach((function(e,n){e===t&&m.splice(n,1)})),ee(),me(),localStorage.setItem("addQueueFilm",JSON.stringify(m)))}!function(){if(null!==localStorage.getItem("addWatchedFilm")){var e=JSON.parse(localStorage.getItem("addWatchedFilm"));e.length>0&&(p=e)}}(),function(){if(null!==localStorage.getItem("addQueueFilm")){var e=JSON.parse(localStorage.getItem("addQueueFilm"));e.length>0&&(m=e)}}();var ue=o.modal,de=(o.closeModal,o.overlay),pe=o.galleryRef;function me(){de.classList.toggle("is-hidden")}function fe(e){"Escape"===e.code&&(me(),document.removeEventListener("keydown",fe))}function he(e){e.preventDefault();var t=e.target;if("IMG"===t.nodeName){ue.innerHTML="";var n=t.dataset.id;me(),i.fetchID(n).then((function(e){return d([e])})).then((function(){document.querySelector("[data-close]").addEventListener("click",me),oe(),document.addEventListener("keydown",fe)}))}}o.galleryLibrery.addEventListener("click",he),pe.addEventListener("click",he),de.addEventListener("click",(function(e){"overlay"===e.target.className&&me()}));var ge=o.homeButton,ye=o.homeButtonText,ve=o.libraryButton,_e=o.libraryButtonText,be=o.libraryButtons,Le=o.searchForm,ke=o.headerBack;ge.addEventListener("click",(function(e){be.classList.add("is-hidden"),_e.classList.remove("current"),Le.classList.remove("is-hidden"),ye.classList.add("current"),ke.classList.add("home"),ke.classList.remove("library"),function(e){J(e,N,I),w()}(e)})),ve.addEventListener("click",(function(e){be.classList.remove("is-hidden"),_e.classList.add("current"),Le.classList.add("is-hidden"),ye.classList.remove("current"),ke.classList.add("library"),ke.classList.remove("home"),function(e){J(e,I,N),$(),C.addEventListener("click",$),F.addEventListener("click",ee)}(e)}))},bxPv:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var l,i=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="film-card">\r\n\t<div class="img-wrapper">\r\n\t\t<img src="https://image.tmdb.org/t/p/w500'+s(typeof(l=null!=(l=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?l:o)===c?l.call(i,{name:"poster_path",hash:{},data:r,loc:{start:{line:4,column:43},end:{line:4,column:58}}}):l)+'" alt="'+s(typeof(l=null!=(l=u(n,"title")||(null!=t?u(t,"title"):t))?l:o)===c?l.call(i,{name:"title",hash:{},data:r,loc:{start:{line:4,column:65},end:{line:4,column:74}}}):l)+'" data-id='+s(typeof(l=null!=(l=u(n,"id")||(null!=t?u(t,"id"):t))?l:o)===c?l.call(i,{name:"id",hash:{},data:r,loc:{start:{line:4,column:84},end:{line:4,column:90}}}):l)+' class="film-img">\r\n\t</div>\r\n\t<div class="film-box">\r\n\t\t<h3 class="film-title">'+s(typeof(l=null!=(l=u(n,"original_title")||(null!=t?u(t,"original_title"):t))?l:o)===c?l.call(i,{name:"original_title",hash:{},data:r,loc:{start:{line:7,column:25},end:{line:7,column:43}}}):l)+'</h3>\r\n\t\t<ul class="genres__list js-genres__list">\r\n\t\t\t<li class="genres__item">\r\n\t\t\t\t<span class="film-text genre">'+s(typeof(l=null!=(l=u(n,"genre_names")||(null!=t?u(t,"genre_names"):t))?l:o)===c?l.call(i,{name:"genre_names",hash:{},data:r,loc:{start:{line:10,column:34},end:{line:10,column:49}}}):l)+' |</span>\r\n\t\t\t\t<span class="film-text">'+s(typeof(l=null!=(l=u(n,"date")||(null!=t?u(t,"date"):t))?l:o)===c?l.call(i,{name:"date",hash:{},data:r,loc:{start:{line:11,column:28},end:{line:11,column:36}}}):l)+'</span>\r\n\t\t\t\t<span class="film-rate">'+s(typeof(l=null!=(l=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?l:o)===c?l.call(i,{name:"vote_average",hash:{},data:r,loc:{start:{line:12,column:28},end:{line:12,column:44}}}):l)+"</span>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:17,column:9}}}))?l:""},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.920582f5f8427da9c5ec.js.map