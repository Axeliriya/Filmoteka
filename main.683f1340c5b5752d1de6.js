(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(t,e,n){},JzNs:function(t,e,n){var a=n("mp5j");t.exports=(a.default||a).template({1:function(t,e,n,a,i){var r,o=t.lambda,l=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<span class="close-modal" data-close></span>\r\n<div class="modal__block-img"><img class="modal__img" src="https://image.tmdb.org/t/p/w500'+l(o(null!=e?c(e,"backdrop_path"):e,e))+'"\r\n        alt="'+l(o(null!=e?c(e,"original_title"):e,e))+'">\r\n</div>\r\n<div class="description">\r\n    <h1 class="modal__title">'+l(o(null!=e?c(e,"original_title"):e,e))+'</h1>\r\n    <ul class="modal__keys">\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Vote / Votes</p>\r\n            <p class="modal__value"><span class="rating">'+l(o(null!=e?c(e,"vote_average"):e,e))+" </span> / "+l(o(null!=e?c(e,"vote_count"):e,e))+'</p>\r\n        </li>\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Popularity</p>\r\n            <p class="modal__value">'+l(o(null!=e?c(e,"popularity"):e,e))+'</p>\r\n        </li>\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Original Title</p>\r\n            <p class="modal__value">'+l(o(null!=e?c(e,"original_title"):e,e))+'</p>\r\n        </li>\r\n        <li class="modal__keyItem">\r\n            <p class="modal__key">Genre</p>\r\n            <ul class="modal__value genre">\r\n                '+(null!=(r=c(n,"each").call(null!=e?e:t.nullContext||{},null!=e?c(e,"genres"):e,{name:"each",hash:{},fn:t.program(2,i,0),inverse:t.noop,data:i,loc:{start:{line:24,column:16},end:{line:24,column:82}}}))?r:"")+'\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n    <h2 class="modal__about">ABOUT</h2>\r\n    <p class="modal__text">'+l(o(null!=e?c(e,"overview"):e,e))+'</p>\r\n    <div class="modal__button">\r\n        <button class="button is-hidden" type="button" data-id="'+l(o(null!=e?c(e,"id"):e,e))+'" data-action="add-watched"\r\n            data-check="false">add to\r\n            Watched</button>\r\n        <button class="button is-hidden" type="button" data-id="'+l(o(null!=e?c(e,"id"):e,e))+'" data-action="add-queue"\r\n            data-check="false">add to\r\n            queue</button>\r\n    </div>\r\n</div>\r\n'},2:function(t,e,n,a,i){var r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<li class="item-genre">'+t.escapeExpression(t.lambda(null!=e?r(e,"name"):e,e))+"</li>"},compiler:[8,">= 4.3.0"],main:function(t,e,n,a,i){var r;return null!=(r=(t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]})(n,"each").call(null!=e?e:t.nullContext||{},e,{name:"each",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i,loc:{start:{line:1,column:0},end:{line:39,column:9}}}))?r:""},useData:!0})},QfWi:function(t,e,n){"use strict";n.r(e);n("0HMw");var a=n("czhI"),i=n.n(a),r={searchQuery:"",apiKey:"e1648943ec3f00b3b8db827b73df4be9",page:1,maxPage:"number",fetchID:function(t){return i()("https://api.themoviedb.org/3/movie/"+t+"?api_key="+this.apiKey).then((function(t){return t.data})).catch((function(t){return console.log(t)}))},fetchMovies:function(){return i()("https://api.themoviedb.org/3/search/movie?query="+this.query+"&api_key="+this.apiKey+"&page="+this.page).then((function(t){return t.data})).catch((function(t){return console.log(t)}))},fetchPopularMovies:function(){return i()("https://api.themoviedb.org/3/trending/movie/day?api_key="+this.apiKey+"&page="+this.page).then((function(t){return t.data})).catch((function(t){return console.log(t)}))},resetPage:function(){this.page=1},setMaxPage:function(t){this.maxPage=t},get query(){return this.searchQuery},set query(t){this.searchQuery=t}},o={homepageSection:document.querySelector(".js-homepage"),librerySection:document.querySelector(".js-librery"),overlay:document.querySelector(".overlay"),modal:document.querySelector(".modal__card"),galleryRef:document.querySelector(".js-gallery__home"),galleryLibrery:document.querySelector(".js-gallery__librery"),inputSearch:document.querySelector("#searchQuery"),homeButton:document.querySelector('[data-action="home"]'),libraryButton:document.querySelector('[data-action="library"]'),libraryButtons:document.querySelector(".library__buttons"),searchForm:document.querySelector(".input__field"),btnWatched:document.querySelector('[data-action="watched"]'),btnQueue:document.querySelector('[data-action="queue"]'),toPrevPageBtn:document.querySelector(".js-pagination .pagination__arrow-left"),toNextPageBtn:document.querySelector(".js-pagination .pagination__arrow-right"),toPrevPageBtnLibrery:document.querySelector(".library-pagination__arrow-left"),toNextPageBtnLibrery:document.querySelector(".library-pagination__arrow-right"),paginationList:document.querySelector(".js-pagination .pagination__list"),homePagination:document.querySelector(".js-pagination"),libraryPaginationList:document.querySelector(".library-pagination__list"),libraryPagination:document.querySelector(".library-pagination"),headerBack:document.querySelector(".page__header")},l=n("JzNs"),c=n.n(l),s=o.modal,u=function(t){var e=c()(t);s.insertAdjacentHTML("beforeend",e)},d=(n("RtS0"),n("Xlt+"),n("3dw1"),n("WB5j"),[]),p=[];var m=n("bxPv"),f=n.n(m);var g=function(t,e){var n=f()(t);e.insertAdjacentHTML("beforeend",n)},h=o.homepageSection,y=o.librerySection,v=o.galleryRef,b=o.inputSearch,_=o.btnWatched,L=o.btnQueue;function k(t,e,n){t.preventDefault(),b.textContent="",v.innerHTML="",e.classList.add("is-hidden"),n.classList.remove("is-hidden")}function P(t,e){t.style.backgroundColor="#ff6b08",t.style.borderColor="transparent",e.style.backgroundColor="transparent",e.style.borderColor="#ffffff"}var S=o.galleryLibrery,x=o.libraryPagination,q=o.btnWatched,w=o.btnQueue,E=o.toPrevPageBtnLibrery,M=o.toNextPageBtnLibrery,j=1;function T(){P(q,w),S.innerHTML="",d.length>0?d.length>19?(x.classList.remove("is-hidden"),H(j=1,d).forEach((function(t){return N(t)})),M.addEventListener("click",O),E.addEventListener("click",B)):(x.classList.add("is-hidden"),d.forEach((function(t){return N(t)}))):(x.classList.add("is-hidden"),S.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Вы ничего не добавили</p></li>')}function I(){P(w,q),S.innerHTML="",p.length>0?p.length>19?(x.classList.remove("is-hidden"),H(j,p).forEach((function(t){return N(t)}))):(x.classList.add("is-hidden"),p.forEach((function(t){return N(t)}))):(x.classList.add("is-hidden"),S.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Вы ничего не добавили</p></li>')}function N(t){r.fetchID(t).then((function(t){return g([t],S)}))}function O(){S.innerHTML="",H(j+=1,d).forEach((function(t){return N(t)})),H(j,d).length<1&&(S.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Вернитесь назад</p></li>')}function B(){S.innerHTML="",H(j-=1,d).forEach((function(t){return N(t)})),H(j,d).length<1&&(S.innerHTML='<li class="modal__keyItem"><p style="color:red;font-size:24px;text-align:center;">Ткните вперед</p></li>')}function H(t,e){if(t<1)return[];var n=20*(t-1),a=n+20;return e.slice(n,a)}function Q(t){t.style.backgroundColor="#ff6b08",t.style.color="#ffffff",t.style.border="none"}function C(t){t.style.backgroundColor="#ffffff",t.style.color="#000000",t.style.border="1px solid black"}function J(){var t=document.querySelector('[data-action="add-watched"]'),e=document.querySelector('[data-action="add-queue"]');t.addEventListener("click",W),e.addEventListener("click",F),function(t,e){d.forEach((function(e){e===t.dataset.id&&(Q(t),t.dataset.check="true")})),p.forEach((function(t){t===e.dataset.id&&(Q(e),e.dataset.check="true")}))}(t,e)}function W(t){var e=t.target.dataset.id;"true"!==t.target.dataset.check?(Q(t.target),t.target.dataset.check="true",d.push(e),localStorage.setItem("addWatchedFilm",JSON.stringify(d))):(C(t.target),t.target.dataset.check="false",d.forEach((function(t,n){t===e&&d.splice(n,1)})),T(),A(),localStorage.setItem("addWatchedFilm",JSON.stringify(d)))}function F(t){var e=t.target.dataset.id;"true"!==t.target.dataset.check?(Q(t.target),t.target.dataset.check="true",p.push(e),localStorage.setItem("addQueueFilm",JSON.stringify(p))):(C(t.target),t.target.dataset.check="false",p.forEach((function(t,n){t===e&&p.splice(n,1)})),I(),A(),localStorage.setItem("addQueueFilm",JSON.stringify(p)))}!function(){if(null!==localStorage.getItem("addWatchedFilm")){var t=JSON.parse(localStorage.getItem("addWatchedFilm"));t.length>0&&(d=t)}}(),function(){if(null!==localStorage.getItem("addQueueFilm")){var t=JSON.parse(localStorage.getItem("addQueueFilm"));t.length>0&&(p=t)}}();var z=o.modal,D=(o.closeModal,o.overlay),R=o.galleryRef;function A(){D.classList.toggle("is-hidden")}function K(t){"Escape"===t.code&&(A(),document.removeEventListener("keydown",K))}function G(t){t.preventDefault();var e=t.target;if("IMG"===e.nodeName){z.innerHTML="";var n=e.dataset.id;A(),r.fetchID(n).then((function(t){return u([t])})).then((function(){document.querySelector("[data-close]").addEventListener("click",A),J(),document.addEventListener("keydown",K)}))}}o.galleryLibrery.addEventListener("click",G),R.addEventListener("click",G),D.addEventListener("click",(function(t){"overlay"===t.target.className&&A()}));n("8cZI"),n("lmye");var U=n("jffb"),V=n.n(U),X=(n("bzha"),n("zrP5"),n("QJ3N"));function Z(t,e){X.info({title:t,text:e})}function Y(){et(),nt(),o.homePagination.classList.remove("is-hidden"),r.fetchPopularMovies().then((function(t){var e=t.results,n=t.page,a=t.total_pages,i=e.map((function(t){var e=t.release_date.slice(0,4);return t.release_date=e,t}));g(i,o.galleryRef),r.page=n,r.setMaxPage(a);var l="";!function(){var t=[],e='<li class="pagination__item"><button type="button" data-action="showPrevPages">...</button></li>',i='<li class="pagination__item"><button type="button" data-action="showNextPages">...</button></li>';if(a-n<6)for(var r=a;r>a-6;r-=1){var o='<li class="pagination__item"><button type="button">'+r+"</button></li>";t.unshift(o)}else for(var c=n;c<n+6&&c<a;c+=1){var s='<li class="pagination__item"><button type="button">'+c+"</button></li>";t.push(s)}l=t.join(" "),a>6&&(l=t.join(" ")+i+'<li class="pagination__item"><button type="button">'+a+"</button></li>"),n>5&&(l='<li class="pagination__item"><button type="button">1</button></li>'+e+t.join(" ")+i+'<li class="pagination__item"><button type="button">'+a+"</button></li>"),a>6&&n>a-6&&(l='<li class="pagination__item"><button type="button">1</button></li>'+e+t.join(" "))}(),o.paginationList.insertAdjacentHTML("beforeend",l),at()}))}function $(){et(),nt(),r.fetchMovies().then((function(t){var e=t.results,n=t.page,a=t.total_pages;g(e,o.galleryRef),r.page=n,r.setMaxPage(a),0===e.length&&Z("Try another word","No movies found for this request");var i="";!function(){if(a<=1)o.homePagination.classList.add("is-hidden");else{o.homePagination.classList.remove("is-hidden");var t=[],e='<li class="pagination__item"><button type="button" data-action="showPrevPages">...</button></li>',r='<li class="pagination__item"><button type="button" data-action="showNextPages">...</button></li>';if(a-n<6)for(var l=a;l>a-6&&l>0;l-=1){var c='<li class="pagination__item"><button type="button">'+l+"</button></li>";t.unshift(c)}else for(var s=n;s<n+6&&s<a;s+=1){var u='<li class="pagination__item"><button type="button">'+s+"</button></li>";t.push(u)}i=t.join(" "),a>6&&(i=t.join(" ")+r+'<li class="pagination__item"><button type="button">'+a+"</button></li>"),n>2&&a>6&&(i='<li class="pagination__item"><button type="button">1</button></li>'+e+t.join(" ")+r+'<li class="pagination__item"><button type="button">'+a+"</button></li>"),a>6&&n>a-6&&(i='<li class="pagination__item"><button type="button">1</button></li>'+e+t.join(" "))}}(),o.paginationList.insertAdjacentHTML("beforeend",i),at()}))}function tt(){""===o.inputSearch.value?Y():$()}function et(){o.galleryRef.innerHTML=""}function nt(){o.paginationList.innerHTML=""}function at(){o.paginationList.children.forEach((function(t){+t.textContent===r.page&&t.classList.add("current")}))}setTimeout(Y,0),o.inputSearch.addEventListener("input",V()((function(t){var e=t.target.value;if(r.query=e,""===r.query)return r.resetPage(),et(),void Y();r.resetPage(),$()}),500)),o.toNextPageBtn.addEventListener("click",(function(){if(r.page===r.maxPage)return void Z("There are no more movies by this request!");r.page+=1,tt()})),o.toPrevPageBtn.addEventListener("click",(function(){if(1===r.page)return;r.page-=1,tt()})),o.paginationList.addEventListener("click",(function(t){if("BUTTON"!==t.target.nodeName)return;if("showNextPages"===t.target.dataset.action)return r.page+=6,void tt();if("showPrevPages"===t.target.dataset.action)return console.log(),r.page-=5,void tt();var e=t.target;r.page=e.innerHTML,tt()}));var it=o.homeButton,rt=o.libraryButton,ot=o.libraryButtons,lt=o.searchForm,ct=o.headerBack;it.addEventListener("click",(function(t){ot.classList.add("is-hidden"),rt.classList.remove("current"),lt.classList.remove("is-hidden"),it.classList.add("current"),ct.classList.add("home"),ct.classList.remove("library"),function(t){k(t,y,h),r.fetchPopularMovies().then((function(t){var e=t.results;return g(e,v)}))}(t)})),rt.addEventListener("click",(function(t){ot.classList.remove("is-hidden"),rt.classList.add("current"),lt.classList.add("is-hidden"),it.classList.remove("current"),ct.classList.add("library"),ct.classList.remove("home"),function(t){k(t,h,y),T(),_.addEventListener("click",T),L.addEventListener("click",I)}(t)}))},bxPv:function(t,e,n){var a=n("mp5j");t.exports=(a.default||a).template({1:function(t,e,n,a,i){var r,o,l=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,s="function",u=t.escapeExpression,d=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<li class="film-card">\r\n\t<div class="img-wrapper">\r\n\t\t<img src="https://image.tmdb.org/t/p/w500'+u(typeof(o=null!=(o=d(n,"poster_path")||(null!=e?d(e,"poster_path"):e))?o:c)===s?o.call(l,{name:"poster_path",hash:{},data:i,loc:{start:{line:4,column:43},end:{line:4,column:58}}}):o)+'" alt="'+u(typeof(o=null!=(o=d(n,"title")||(null!=e?d(e,"title"):e))?o:c)===s?o.call(l,{name:"title",hash:{},data:i,loc:{start:{line:4,column:65},end:{line:4,column:74}}}):o)+'" data-id='+u(typeof(o=null!=(o=d(n,"id")||(null!=e?d(e,"id"):e))?o:c)===s?o.call(l,{name:"id",hash:{},data:i,loc:{start:{line:4,column:84},end:{line:4,column:90}}}):o)+' class="film-img">\r\n\t</div>\r\n\t<div class="film-box">\r\n\t\t<h3 class="film-title">'+u(typeof(o=null!=(o=d(n,"original_title")||(null!=e?d(e,"original_title"):e))?o:c)===s?o.call(l,{name:"original_title",hash:{},data:i,loc:{start:{line:7,column:25},end:{line:7,column:43}}}):o)+"</h3>\r\n\r\n\t\t<p>\r\n"+(null!=(r=d(n,"each").call(l,null!=e?d(e,"genre_ids"):e,{name:"each",hash:{},fn:t.program(2,i,0),inverse:t.noop,data:i,loc:{start:{line:10,column:3},end:{line:12,column:13}}}))?r:"")+'\t\t\t</span>\r\n\t\t\t<span class="film-text">| '+u(typeof(o=null!=(o=d(n,"release_date")||(null!=e?d(e,"release_date"):e))?o:c)===s?o.call(l,{name:"release_date",hash:{},data:i,loc:{start:{line:14,column:29},end:{line:14,column:45}}}):o)+'</span>\r\n\t\t\t<span class="film-rate">'+u(typeof(o=null!=(o=d(n,"vote_average")||(null!=e?d(e,"vote_average"):e))?o:c)===s?o.call(l,{name:"vote_average",hash:{},data:i,loc:{start:{line:15,column:27},end:{line:15,column:43}}}):o)+"</span>\r\n\t\t</p>\r\n\t</div>\r\n</li>\r\n"},2:function(t,e,n,a,i){var r,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t<span class="film-text genre"> '+t.escapeExpression("function"==typeof(r=null!=(r=o(n,"name")||(null!=e?o(e,"name"):e))?r:t.hooks.helperMissing)?r.call(null!=e?e:t.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:11,column:34},end:{line:11,column:42}}}):r)+"\r\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,a,i){var r;return null!=(r=(t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]})(n,"each").call(null!=e?e:t.nullContext||{},e,{name:"each",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i,loc:{start:{line:1,column:0},end:{line:19,column:9}}}))?r:""},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.683f1340c5b5752d1de6.js.map